
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="icon" type="image/png" sizes="16x16" href="/styles/favicon-16x16.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/styles/favicon-32x32.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/styles/apple-touch-icon.png"/>
</head>
<body>
<table class="table table-bordered">
    <thead class="thead-dark">
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Name</th>
            <th scope="col">Type</th>
            <th scope="col">Country</th>
            <th scope="col">Region</th>
            <th scope="col">Longitude</th>
            <th scope="col">Latitude</th>
            <th scope="col">Description</th>
            <th scope="col">Bookings</th>
            <th scope="col" class="text-end">Actions</th> 
           
        </tr>
    </thead>

    <tbody>
        <% activities.forEach((activity) => { %>
        <tr>
            <td><%= activity.id %></td>
            <td><%= activity.exp_name %></td>
            <td><%= activity.exp_type %></td>
            <td><%= activity.country %></td>
            <td><%= activity.region %></td>
            <td><%= activity.lon %></td>
            <td><%= activity.lat %></td>
            <td><%= activity.exp_description %></td>
            <td><%= activity.bookings %></td>
            <td>
                <form id="bookForm" data-activity-id="<%= activity.id %>">
                    <button type="submit" onclick="bookingActivity(this)">Book</button>
                </form>
            </td>
        </tr>
        <% }); %>
    </tbody>
</table>
<script>
    async function bookingActivity(button) {
const buttonid = button.parentElement.getAttribute('data-activity-id');
try {
    const response = await fetch(`/book/${buttonid}`,
    {method: 'PUT'}
    )
    if(response.ok){
        console.log(`Successfully booked activity`);
    }
    else {
        console.log(`Failed to log.`);
    }
} catch (err) {
    console.error(err);
}
}   
</script>
</body>
</html>>